# Plan v2 -> Implementation Status Matrix

- Status: verified
- Owner: @ffq-docs
- Last Verified Commit: e2baae0
- Last Verified Date: 2026-02-21

Source plan: `tickets/eng/Plan_v2.md`.

Status legend:
- `done`: implemented and validated with code + tests/docs/workflows.
- `partial`: implemented in part; acceptance criteria not fully closed.
- `not started`: no meaningful implementation evidence yet.

| Plan heading | Status | Evidence (code/workflow/docs) | Evidence (tests) | Gap note |
|---|---|---|---|---|
| `v2 Deliverables (short, to keep scope crisp)` | partial | `docs/v2/README.md`, `docs/v2/status-matrix.md`, `crates/client/src/ffi.rs`, `crates/client/src/python.rs`, `crates/client/src/engine.rs`, `crates/distributed/src/coordinator.rs` | `crates/client/tests/public_api_contract.rs`, `crates/client/tests/udf_api.rs`, `crates/client/tests/physical_registry.rs` | AQE + native hybrid node deliverables are not complete. |
| `EPIC 1 — Runtime & Portability (library-first stays core)` | partial | `docs/v2/runtime-portability.md`, `docs/v2/distributed-runtime.md`, `Cargo.toml`, `crates/client/Cargo.toml`, `.github/workflows/feature-matrix.yml`, `crates/distributed/src/coordinator.rs` | `crates/distributed/src/coordinator.rs` (unit tests), `crates/client/tests/distributed_runtime_roundtrip.rs` | Release artifact pipeline is deferred. |
| `1.1 Stabilize single-binary & feature flags` | done | `docs/v2/runtime-portability.md`, `Cargo.toml`, `crates/client/Cargo.toml`, `.github/workflows/feature-matrix.yml` | `.github/workflows/feature-matrix.yml` CI matrix commands | Release publishing itself is tracked under EPIC 11. |
| `1.2 Harden distributed runtime (cluster-ready, but optional)` | partial | `docs/v2/distributed-runtime.md`, `docs/v2/control-plane.md`, `crates/distributed/src/coordinator.rs`, `crates/distributed/src/worker.rs`, `crates/distributed/proto/ffq_distributed.proto` | `crates/distributed/src/coordinator.rs` (`coordinator_requeues_tasks_from_stale_worker`, capability routing test) | End-to-end worker-kill recovery acceptance is not fully documented/closed. |
| `EPIC 2 — Public API, FFI & Python Bindings` | done | `docs/v2/api-contract.md`, `docs/v2/ffi-python.md`, `docs/v2/extensibility.md`, `crates/client/src/engine.rs`, `crates/client/src/ffi.rs`, `crates/client/src/python.rs`, `docs/dev/api-semver-policy.md` | `crates/client/tests/public_api_contract.rs`, `crates/client/tests/udf_api.rs`, `crates/client/tests/physical_registry.rs` | - |
| `2.1 Versioned API surface + SemVer rules` | done | `docs/v2/api-contract.md`, `docs/dev/api-semver-policy.md`, `.github/workflows/api-semver.yml`, `crates/client/src/engine.rs` | `crates/client/tests/public_api_contract.rs` | - |
| 2.2 Stable C ABI (`ffi` feature) | done | `docs/v2/ffi-python.md`, `crates/client/src/ffi.rs`, `include/ffq_ffi.h`, `docs/dev/ffi-c-api.md`, `examples/c/ffi_example.c` | `make ffi-example` path in `Makefile` | - |
| `2.3 Python bindings (mandatory for v2)` | done | `docs/v2/ffi-python.md`, `crates/client/src/python.rs`, `pyproject.toml`, `docs/dev/python-bindings.md`, `.github/workflows/python-wheels.yml` | wheel smoke in `.github/workflows/python-wheels.yml` | - |
| `2.4 Pluggable hooks + UDF API` | done | `docs/v2/extensibility.md`, `docs/v2/custom-operators-deployment.md`, `crates/client/src/engine.rs`, `crates/client/src/planner_facade.rs`, `crates/execution/src/udf.rs`, `crates/execution/src/physical_registry.rs` | `crates/client/tests/udf_api.rs`, `crates/planner/tests/optimizer_custom_rule.rs`, `crates/client/tests/physical_registry.rs` | - |
| `EPIC 3 — SQL & Semantics Extensions` | partial | `docs/v2/sql-semantics.md`, `docs/v2/quickstart.md`, `docs/v2/migration-v1-to-v2.md`, `crates/planner/src/sql_frontend.rs`, `crates/client/src/runtime.rs` | `crates/client/tests/embedded_hash_join.rs`, `crates/client/tests/embedded_case_expr.rs`, `crates/client/tests/embedded_cte_subquery.rs`, `crates/client/tests/embedded_window_functions.rs` | Core EPIC-3 surface is implemented; some advanced performance/operational pieces remain partial (for example window spill scalability). |
| `3.1 Outer joins` | done | `docs/v2/sql-semantics.md`, `crates/planner/src/logical_plan.rs`, `crates/client/src/runtime.rs` | `crates/client/tests/embedded_hash_join.rs`, `crates/client/tests/snapshots/join/hash_join_left_outer_correctness.snap`, `crates/client/tests/snapshots/join/hash_join_right_outer_correctness.snap`, `crates/client/tests/snapshots/join/hash_join_full_outer_correctness.snap` | - |
| `3.2 CASE expressions` | done | `docs/v2/sql-semantics.md`, `crates/planner/src/sql_frontend.rs`, `crates/client/src/runtime.rs` | `crates/client/tests/embedded_case_expr.rs` | - |
| `3.3 CTEs & subqueries (MVP)` | done | `docs/v2/sql-semantics.md`, `crates/planner/src/analyzer.rs`, `crates/planner/src/optimizer.rs`, `crates/client/src/runtime.rs` | `crates/client/tests/embedded_cte_subquery.rs`, `crates/client/tests/embedded_cte_subquery_golden.rs` | - |
| `3.3.1 Scalar Subqueries (Uncorrelated) — = (SELECT ...), <, >` | done | `docs/v2/sql-semantics.md`, `crates/planner/src/logical_plan.rs`, `crates/client/src/runtime.rs` | `crates/client/tests/embedded_cte_subquery.rs` | - |
| `3.3.2 SQL-Standard IN/NOT IN Null Semantics` | done | `docs/v2/sql-semantics.md`, `crates/client/src/runtime.rs` | `crates/client/tests/embedded_cte_subquery.rs`, `crates/client/tests/embedded_cte_subquery_golden.rs` | - |
| `3.3.3 NOT EXISTS + EXISTS Semantics Hardening` | done | `docs/v2/sql-semantics.md`, `crates/planner/src/optimizer.rs`, `crates/client/src/runtime.rs` | `crates/client/tests/embedded_cte_subquery.rs` | - |
| `3.3.4 Correlation Detection in Analyzer` | done | `docs/v2/sql-semantics.md`, `crates/planner/src/analyzer.rs` | `crates/client/tests/embedded_cte_subquery.rs` | - |
| `3.3.5 Correlated EXISTS Decorrelation (Semijoin/Antijoin)` | done | `docs/v2/sql-semantics.md`, `crates/planner/src/optimizer.rs` | `crates/client/tests/embedded_cte_subquery.rs` | - |
| `3.3.6 Correlated IN Decorrelation (Null-Aware Semijoin)` | done | `docs/v2/sql-semantics.md`, `crates/planner/src/optimizer.rs`, `crates/client/src/runtime.rs` | `crates/client/tests/embedded_cte_subquery.rs`, `crates/client/tests/embedded_cte_subquery_golden.rs` | - |
| `3.3.7 CTE Dependency Graph + Ordering` | done | `docs/v2/sql-semantics.md`, `crates/planner/src/analyzer.rs` | `crates/client/tests/embedded_cte_subquery.rs` | - |
| `3.3.8 Recursive CTE (Phase 1)` | done | `docs/v2/sql-semantics.md`, `crates/planner/src/analyzer.rs`, `crates/client/src/runtime.rs` | `crates/client/tests/embedded_cte_subquery.rs` | - |
| `3.3.9 CTE Materialization vs Inlining Policy` | partial | `docs/v2/sql-semantics.md`, `crates/planner/src/logical_plan.rs`, `crates/client/src/runtime.rs` | `crates/client/tests/embedded_cte_subquery_golden.rs` | Reuse policy is documented/available; deeper performance characterization can expand. |
| `3.3.10 Planner/Optimizer Integration Passes for Subqueries` | done | `docs/v2/sql-semantics.md`, `crates/planner/src/optimizer.rs`, `crates/planner/src/explain.rs` | `crates/client/tests/embedded_cte_subquery.rs` | - |
| `3.3.11 Distributed Parity for CTE/Subqueries` | done | `docs/v2/sql-semantics.md`, `docs/v2/testing.md`, `crates/client/src/runtime.rs` | `crates/client/tests/distributed_runtime_roundtrip.rs` | - |
| `3.3.12 Error Taxonomy + Explain Visibility` | done | `docs/v2/sql-semantics.md`, `crates/planner/src/explain.rs`, `crates/common/src/error.rs` | `crates/client/tests/embedded_cte_subquery.rs` | - |
| `3.3.13 Correctness Suite Expansion (Golden + Edge Matrix)` | done | `docs/v2/sql-semantics.md`, `crates/client/tests/snapshots/subquery/embedded_cte_subquery_edge_matrix.snap` | `crates/client/tests/embedded_cte_subquery_golden.rs` | - |
| `3.3.14 Docs + Migration Update (v2)` | done | `docs/v2/sql-semantics.md`, `docs/v2/migration-v1-to-v2.md` | `scripts/validate-docs-v2.py` | - |
| `3.4 Window functions (MVP)` | done | `docs/v2/sql-semantics.md`, `crates/planner/src/logical_plan.rs`, `crates/client/src/runtime.rs` | `crates/client/tests/embedded_window_functions.rs`, `crates/client/tests/embedded_window_golden.rs` | - |
| `3.4.1 Window SQL Grammar Completion` | done | `docs/v2/sql-semantics.md`, `crates/planner/src/sql_frontend.rs` | `crates/client/tests/embedded_window_functions.rs` | - |
| `3.4.2 Window Function Set Expansion (Ranking/Offset/Value)` | done | `docs/v2/sql-semantics.md`, `crates/client/src/runtime.rs` | `crates/client/tests/embedded_window_functions.rs`, `crates/client/tests/embedded_window_golden.rs` | - |
| `3.4.3 Aggregate Window Function Expansion` | done | `docs/v2/sql-semantics.md`, `crates/client/src/runtime.rs` | `crates/client/tests/embedded_window_functions.rs` | - |
| `3.4.4 Full Window Frame Semantics` | done | `docs/v2/sql-semantics.md`, `crates/client/src/runtime.rs` | `crates/client/tests/embedded_window_functions.rs` | - |
| `3.4.5 Frame Exclusion Semantics` | done | `docs/v2/sql-semantics.md`, `crates/client/src/runtime.rs`, `crates/planner/src/sql_frontend.rs` | `crates/client/tests/embedded_window_functions.rs`, `crates/client/tests/distributed_runtime_roundtrip.rs` | - |
| `3.4.6 Type Coercion and Return-Type Rules for Windows` | done | `docs/v2/sql-semantics.md`, `crates/planner/src/analyzer.rs`, `crates/client/src/runtime.rs` | `crates/client/tests/embedded_window_functions.rs` | - |
| `3.4.7 Null/Tie Ordering and Determinism Hardening` | done | `docs/v2/sql-semantics.md`, `crates/client/src/runtime.rs` | `crates/client/tests/embedded_window_functions.rs`, `crates/client/tests/embedded_window_golden.rs` | - |
| `3.4.8 Window Grouping and Sort Reuse Optimization` | done | `docs/v2/sql-semantics.md`, `crates/planner/src/explain.rs`, `crates/client/src/runtime.rs` | `crates/client/tests/embedded_window_golden.rs` | - |
| `3.4.9 Runtime Memory Model + Spill for WindowExec` | partial | `docs/v2/sql-semantics.md`, `crates/client/src/runtime.rs` | `crates/client/tests/embedded_window_functions.rs` | Functional window execution is implemented; explicit large-partition spill hardening remains limited. |
| `3.4.10 Distributed Window Execution (Phase 1)` | done | `docs/v2/sql-semantics.md`, `crates/client/src/runtime.rs`, `crates/distributed/src/worker.rs` | `crates/client/tests/distributed_runtime_roundtrip.rs` | - |
| `3.4.11 Embedded vs Distributed Window Parity Suite` | done | `docs/v2/sql-semantics.md`, `docs/v2/testing.md` | `crates/client/tests/distributed_runtime_roundtrip.rs` | - |
| `3.4.12 Explain/Debug Visibility for Window Planning` | done | `docs/v2/sql-semantics.md`, `crates/planner/src/explain.rs` | `crates/client/tests/embedded_window_functions.rs`, `crates/client/tests/embedded_window_golden.rs` | - |
| `3.4.13 Correctness Matrix + Golden Suite Expansion` | done | `docs/v2/sql-semantics.md`, `crates/client/tests/snapshots/window/embedded_window_edge_matrix.snap` | `crates/client/tests/embedded_window_golden.rs`, `crates/client/tests/embedded_window_functions.rs` | - |
| `3.4.14 Window Performance Benchmarks` | partial | `docs/v2/benchmarks.md`, `scripts/run-bench-v2-window.sh`, `tests/bench/queries/window/window_narrow_partitions.sql`, `tests/bench/queries/window/window_wide_partitions.sql`, `tests/bench/thresholds/window_regression_thresholds.json` | `scripts/run-bench-v2-window.sh` | Benchmark assets and thresholds exist; CI/nightly regression gating policy can be expanded further. |
| `3.4.15 Docs + Migration Update (v2)` | done | `docs/v2/sql-semantics.md`, `docs/v2/quickstart.md`, `docs/v2/migration-v1-to-v2.md` | `scripts/validate-docs-v2.py` | - |
| `EPIC 4 — AQE (Adaptive Query Execution)` | partial | `docs/v2/adaptive-shuffle-tuning.md`, `docs/v2/distributed-runtime.md`, `docs/v2/testing.md`, `crates/common/src/adaptive.rs`, `crates/distributed/src/coordinator.rs`, `crates/client/src/runtime.rs` | `crates/distributed/src/coordinator.rs`, `crates/client/tests/distributed_runtime_roundtrip.rs` | AQE core is implemented for adaptive join/shuffle/skew paths; some production hardening and rollout policy remains partial. |
| `4.1 Runtime stats plumbing` | done | `docs/v2/distributed-runtime.md`, `docs/v2/adaptive-shuffle-tuning.md`, `crates/distributed/src/coordinator.rs`, `crates/client/src/runtime.rs` | `crates/distributed/src/coordinator.rs`, `crates/client/tests/distributed_runtime_roundtrip.rs` | - |
| `4.2 Adaptive join choice` | done | `docs/v2/distributed-runtime.md`, `crates/client/src/runtime.rs`, `crates/planner/src/physical_planner.rs` | `crates/client/tests/embedded_hash_join.rs` | - |
| `4.3 Adaptive shuffle partitions (MVP)` | done | `docs/v2/adaptive-shuffle-tuning.md`, `docs/v2/distributed-runtime.md`, `crates/common/src/adaptive.rs`, `crates/distributed/src/coordinator.rs` | `crates/distributed/src/coordinator.rs` | - |
| `4.3.1 Reduce-Stage Task Fanout Model` | done | `docs/v2/adaptive-shuffle-tuning.md`, `crates/distributed/src/coordinator.rs` | `crates/distributed/src/coordinator.rs` | - |
| `4.3.2 Partition Assignment Contract in Task Payload` | done | `docs/v2/distributed-runtime.md`, `crates/distributed/src/coordinator.rs`, `crates/distributed/proto/ffq_distributed.proto` | `crates/distributed/src/coordinator.rs` | - |
| `4.3.3 Worker ShuffleRead Partition-Scoped Execution` | done | `docs/v2/distributed-runtime.md`, `crates/distributed/src/worker.rs`, `crates/distributed/src/grpc.rs` | `crates/distributed/src/grpc.rs` | - |
| `4.3.4 Adaptive Partition Planner (Barrier-Time)` | done | `docs/v2/adaptive-shuffle-tuning.md`, `crates/common/src/adaptive.rs`, `crates/distributed/src/coordinator.rs` | `crates/distributed/src/coordinator.rs` | - |
| `4.3.5 Deterministic Coalesce/Split Algorithm` | done | `docs/v2/adaptive-shuffle-tuning.md`, `crates/common/src/adaptive.rs`, `crates/distributed/src/coordinator.rs` | `crates/distributed/src/coordinator.rs` | - |
| `4.3.6 Min/Max Reduce Task Guardrails` | done | `docs/v2/adaptive-shuffle-tuning.md`, `crates/distributed/src/coordinator.rs` | `crates/distributed/src/coordinator.rs` | - |
| `4.3.7 Skew Detection + Hot Partition Splitting` | done | `docs/v2/adaptive-shuffle-tuning.md`, `crates/common/src/adaptive.rs`, `crates/distributed/src/coordinator.rs` | `crates/distributed/src/coordinator.rs` | - |
| `4.3.8 Retry/Attempt Safety for Adaptive Layout` | done | `docs/v2/adaptive-shuffle-tuning.md`, `docs/v2/distributed-runtime.md`, `crates/distributed/src/coordinator.rs`, `crates/distributed/src/grpc.rs` | `crates/distributed/src/coordinator.rs` | - |
| `4.3.9 Stage Barrier + No-Race Scheduling` | done | `docs/v2/adaptive-shuffle-tuning.md`, `crates/distributed/src/coordinator.rs` | `crates/distributed/src/coordinator.rs` | - |
| `4.3.10 QueryStatus + EXPLAIN ANALYZE Visibility` | done | `docs/v2/adaptive-shuffle-tuning.md`, `docs/v2/distributed-runtime.md`, `crates/distributed/src/coordinator.rs`, `crates/client/src/runtime.rs` | `crates/distributed/src/coordinator.rs`, `crates/client/tests/distributed_runtime_roundtrip.rs` | - |
| `4.3.11 Control-Plane/RPC Schema Upgrade` | done | `docs/v2/distributed-runtime.md`, `docs/v2/control-plane.md`, `crates/distributed/proto/ffq_distributed.proto`, `crates/distributed/src/grpc.rs` | `crates/distributed/src/grpc.rs`, `crates/distributed/src/coordinator.rs` | - |
| `4.3.12 Embedded Runtime Adaptive Partitioning Parity` | partial | `docs/v2/adaptive-shuffle-tuning.md`, `crates/common/src/adaptive.rs`, `crates/client/src/runtime.rs`, `crates/distributed/src/coordinator.rs` | `crates/client/tests/distributed_runtime_roundtrip.rs` | Shared planner/stats model exists; deeper parity matrix can expand for wider workload shapes. |
| `4.3.13 Correctness + Fault-Injection Test Matrix` | done | `docs/v2/testing.md`, `crates/distributed/src/coordinator.rs` | `crates/distributed/src/coordinator.rs`, `crates/client/tests/distributed_runtime_roundtrip.rs` | - |
| `4.3.14 Performance Benchmarks + Regression Gates` | partial | `docs/v2/benchmarks.md`, `scripts/run-bench-v2-adaptive-shuffle.sh`, `tests/bench/thresholds/adaptive_shuffle_regression_thresholds.json` | `scripts/run-bench-v2-adaptive-shuffle.sh` | Benchmark assets and threshold comparator are present; CI/nightly policy can be tightened further. |
| `4.3.15 Docs + Tuning Guide Update (v2)` | done | `docs/v2/adaptive-shuffle-tuning.md`, `docs/v2/distributed-runtime.md`, `docs/v2/testing.md` | `scripts/validate-docs-v2.py` | - |
| `4.4 Skew handling (MVP)` | done | `docs/v2/adaptive-shuffle-tuning.md`, `crates/common/src/adaptive.rs`, `crates/distributed/src/coordinator.rs` | `crates/distributed/src/coordinator.rs` | - |
| `EPIC 5 — Join System v2` | partial | `docs/v2/join-system-v2.md`, `docs/v2/testing.md`, `crates/client/src/runtime.rs`, `crates/planner/src/physical_planner.rs`, `crates/planner/src/optimizer.rs`, `crates/planner/src/analyzer.rs` | `crates/client/tests/embedded_hash_join.rs`, `crates/client/tests/embedded_cte_subquery.rs`, `crates/client/src/runtime_tests.rs`, `crates/client/examples/bench_join_radix.rs`, `crates/client/examples/bench_join_bloom.rs` | Join system v2 is implemented for radix/bloom/targeted SMJ/semi-anti semantics; broader join-system roadmap remains open. |
| `5.1 Radix-partitioned hash join` | done | `docs/v2/join-system-v2.md`, `crates/client/src/runtime.rs`, `crates/client/examples/bench_join_radix.rs` | `make bench-v2-join-radix`, `crates/client/tests/embedded_hash_join.rs` | - |
| `5.2 Bloom filter pushdown` | done | `docs/v2/join-system-v2.md`, `crates/client/src/runtime.rs`, `crates/client/examples/bench_join_bloom.rs` | `make bench-v2-join-bloom`, `crates/client/tests/embedded_hash_join.rs` | - |
| `5.3 Sort-merge join (targeted)` | partial | `docs/v2/join-system-v2.md`, `crates/planner/src/optimizer.rs`, `crates/planner/src/physical_planner.rs`, `crates/client/src/runtime.rs` | `crates/client/src/runtime_tests.rs` | Targeted SMJ selection path exists; external-sort completeness/perf characterization remains limited. |
| `5.4 Semi/anti joins (optional)` | done | `docs/v2/join-system-v2.md`, `crates/planner/src/logical_plan.rs`, `crates/planner/src/analyzer.rs`, `crates/client/src/runtime.rs` | `crates/client/tests/embedded_cte_subquery.rs`, `crates/client/tests/embedded_hash_join.rs` | - |
| `EPIC 6 — Aggregation v2` | partial | `docs/v2/aggregation-v2.md`, `docs/v2/testing.md`, `crates/client/src/runtime.rs`, `crates/planner/src/physical_planner.rs`, `crates/planner/src/logical_plan.rs`, `crates/planner/src/sql_frontend.rs` | `crates/client/tests/embedded_hash_aggregate.rs`, `crates/client/tests/distributed_runtime_roundtrip.rs` | Streaming spill + distinct + approx are implemented; grouping sets are not implemented yet. |
| `6.1 Streaming hash agg + robust spill` | partial | `docs/v2/aggregation-v2.md`, `crates/client/src/runtime.rs`, `docs/v2/operators-core.md` | `crates/client/tests/embedded_hash_aggregate.rs`, `crates/client/tests/distributed_runtime_roundtrip.rs` | Hash-aggregate spill path is implemented and validated; additional production-tuning hardening can expand further. |
| `6.2 Distinct aggregation (two-phase)` | done | `docs/v2/aggregation-v2.md`, `crates/planner/src/physical_planner.rs`, `crates/client/src/runtime.rs` | `crates/client/tests/embedded_hash_aggregate.rs`, `crates/client/tests/distributed_runtime_roundtrip.rs` | - |
| `6.3 Optional: approx aggregates / grouping sets` | partial | `docs/v2/aggregation-v2.md`, `crates/planner/src/logical_plan.rs`, `crates/planner/src/sql_frontend.rs`, `crates/client/src/runtime.rs` | `crates/client/tests/embedded_hash_aggregate.rs`, `crates/client/tests/distributed_runtime_roundtrip.rs` | `APPROX_COUNT_DISTINCT` exists behind feature `approx`; grouping sets are not implemented. |
| `EPIC 7 — Shuffle & Distributed Execution v2` | partial | `docs/v2/distributed-runtime.md`, `docs/v2/testing.md`, `crates/distributed/src/worker.rs`, `crates/distributed/src/coordinator.rs`, `crates/distributed/src/grpc.rs` | `crates/distributed/src/coordinator.rs` tests, `crates/distributed/src/grpc.rs` tests | Capability-aware scheduling and pipelined-shuffle MVP are implemented; compression/zero-copy/speculation/memory-manager tracks remain open. |
| `7.1 Shuffle compression` | not started | Gap | Gap | No shuffle compression evidence. |
| `7.2 Pipelined shuffle (MVP)` | done | `docs/v2/distributed-runtime.md`, `docs/v2/testing.md`, `crates/distributed/src/coordinator.rs`, `crates/distributed/src/worker.rs`, `crates/distributed/src/grpc.rs`, `crates/distributed/proto/ffq_distributed.proto` | `coordinator_allows_pipelined_reduce_assignment_when_partition_ready`, `coordinator_pipeline_requires_committed_offset_threshold_before_scheduling`, `coordinator_backpressure_throttles_assignment_windows`, `worker_shuffle_fetch_respects_committed_watermark_and_emits_eof_marker` | MVP closes control-plane/worker streaming readiness, incremental fetch cursors, and backpressure windows; deeper transport optimization remains under `7.3`. |
| `7.2.1 Map-Side Incremental Shuffle Writer` | partial | `docs/v2/distributed-runtime.md`, `crates/distributed/src/worker.rs`, `crates/shuffle/src/writer.rs` | `crates/distributed/src/worker_tests.rs` | Chunked partition writes and staged publish windows exist; true in-operator streaming emission during map execution remains partial. |
| `7.2.2 Partition Stream Metadata Model` | done | `docs/v2/distributed-runtime.md`, `docs/v2/control-plane.md`, `crates/distributed/src/coordinator.rs`, `crates/distributed/proto/ffq_distributed.proto` | `crates/distributed/src/coordinator.rs`, `crates/distributed/src/grpc.rs` | - |
| `7.2.3 Coordinator Stream-Aware Scheduling` | done | `docs/v2/distributed-runtime.md`, `docs/v2/adaptive-shuffle-tuning.md`, `crates/distributed/src/coordinator.rs` | `coordinator_allows_pipelined_reduce_assignment_when_partition_ready`, `coordinator_pipeline_requires_committed_offset_threshold_before_scheduling` | - |
| `7.2.4 Chunk-Range Fetch RPC` | done | `docs/v2/distributed-runtime.md`, `docs/v2/control-plane.md`, `crates/distributed/src/grpc.rs`, `crates/distributed/proto/ffq_distributed.proto`, `crates/distributed/src/coordinator.rs` | `worker_shuffle_fetch_supports_range_and_returns_chunk_offsets_and_watermark`, `worker_shuffle_fetch_respects_committed_watermark_and_emits_eof_marker` | - |
| `7.2.5 Reduce Reader Cursors + Incremental Decode` | done | `docs/v2/distributed-runtime.md`, `crates/distributed/src/worker.rs`, `crates/client/src/runtime.rs` | `crates/distributed/src/grpc.rs`, `crates/client/tests/distributed_runtime_roundtrip.rs` | - |
| `7.2.6 Stream Commit/Finalize Protocol` | done | `docs/v2/distributed-runtime.md`, `docs/v2/control-plane.md`, `crates/distributed/src/worker.rs`, `crates/distributed/src/coordinator.rs`, `crates/distributed/proto/ffq_distributed.proto` | `worker_shuffle_fetch_respects_committed_watermark_and_emits_eof_marker` | - |
| `7.2.7 Retry/Epoch Safety for Streaming` | done | `docs/v2/distributed-runtime.md`, `docs/v2/adaptive-shuffle-tuning.md`, `crates/distributed/src/coordinator.rs`, `crates/distributed/src/grpc.rs` | `worker_shuffle_service_enforces_stream_guardrails`, `worker_shuffle_fetch_out_of_order_range_requests_reconstruct_without_loss`, `crates/distributed/src/coordinator.rs` | - |
| `7.2.8 Backpressure Control Loop` | done | `docs/v2/distributed-runtime.md`, `docs/v2/adaptive-shuffle-tuning.md`, `docs/v2/control-plane.md`, `crates/distributed/src/coordinator.rs` | `coordinator_backpressure_throttles_assignment_windows` | - |
| `7.2.9 Memory/Disk Guardrails for Streaming` | partial | `docs/v2/distributed-runtime.md`, `docs/v2/adaptive-shuffle-tuning.md`, `crates/distributed/src/grpc.rs`, `crates/distributed/src/coordinator.rs`, `crates/distributed/src/bin/ffq-worker.rs` | `worker_shuffle_service_enforces_stream_guardrails` | Stream/window/chunk guardrails exist; centralized memory/disk limit management remains limited. |
| `7.2.10 QueryStatus/Explain Streaming Visibility` | done | `docs/v2/distributed-runtime.md`, `docs/v2/adaptive-shuffle-tuning.md`, `crates/distributed/src/coordinator.rs`, `crates/client/src/runtime.rs`, `crates/distributed/src/grpc.rs` | `crates/distributed/src/coordinator.rs`, `crates/distributed/src/grpc.rs`, `crates/client/tests/distributed_runtime_roundtrip.rs` | - |
| `7.2.11 Correctness + Fault Injection Matrix` | partial | `docs/v2/testing.md`, `docs/v2/distributed-runtime.md`, `crates/distributed/src/coordinator.rs`, `crates/distributed/src/grpc.rs` | `worker_shuffle_fetch_out_of_order_range_requests_reconstruct_without_loss`, `worker_shuffle_service_enforces_stream_guardrails`, `coordinator_backpressure_throttles_assignment_windows` | Strong coverage exists for chunk ordering/epochs/guardrails; coordinator restart fault matrix is not yet comprehensive. |
| `7.2.12 TTFR Benchmark + Regression Gate` | done | `docs/v2/benchmarks.md`, `docs/v2/testing.md`, `docs/v2/adaptive-shuffle-tuning.md`, `crates/client/examples/bench_pipelined_shuffle_ttfr.rs`, `scripts/run-bench-v2-pipelined-shuffle.sh`, `scripts/check-bench-v2-pipelined-ttfr.py`, `tests/bench/thresholds/pipelined_shuffle_ttfr_thresholds.json` | `make bench-v2-pipelined-shuffle`, `make bench-v2-pipelined-shuffle-gate` | - |
| `7.2.13 Docs + Tuning Guide Update` | done | `docs/v2/distributed-runtime.md`, `docs/v2/adaptive-shuffle-tuning.md`, `docs/v2/testing.md`, `docs/v2/benchmarks.md` | `scripts/validate-docs-v2.py` | - |
| `7.3 Fewer copies / network path` | not started | Gap | Gap | No copy-minimization benchmark evidence. |
| `7.4 Speculative execution + better scheduling` | partial | `docs/v2/distributed-runtime.md`, `crates/distributed/src/coordinator.rs`, `crates/distributed/src/bin/ffq-coordinator.rs` | `coordinator_launches_speculative_attempt_for_straggler_and_accepts_older_success` | Speculative execution is implemented/tested; locality-aware scheduling remains limited and not fully documented. |
| `7.5 Memory/Spill Manager` | not started | Gap | Gap | No centralized memory manager evidence. |
| `EPIC 8 — Storage & IO v2` | partial | `docs/v2/storage-catalog.md`, `docs/v2/testing.md`, `crates/storage/src/parquet_provider.rs`, `crates/storage/src/object_store_provider.rs`, `crates/storage/src/stats.rs` | `crates/storage/src/parquet_provider.rs`, `crates/storage/src/object_store_provider.rs` | Partition pruning/stats/cache/object-store retries are implemented in part; full production-grade storage roadmap remains open. |
| `8.1 Partitioned tables + partition pruning` | partial | `docs/v2/storage-catalog.md`, `crates/storage/src/parquet_provider.rs` | `partition_pruning_hive_matches_eq_and_range_filters` | Partition pruning exists for supported hive-style path filters; full partitioned-table catalog/layout coverage is still limited. |
| `8.2 Statistics collection` | partial | `docs/v2/storage-catalog.md`, `crates/storage/src/stats.rs`, `crates/storage/src/parquet_provider.rs`, `crates/storage/src/provider.rs` | `crates/storage/src/parquet_provider.rs` | File stats types and parquet metadata extraction exist; optimizer integration is still heuristic/partial. |
| `8.3 File-level caching` | done | `docs/v2/storage-catalog.md`, `docs/v2/testing.md`, `crates/storage/src/parquet_provider.rs`, `crates/common/src/metrics.rs` | `block_cache_records_miss_then_hit_events` | - |
| `8.4 Object storage “production-grade”` | partial | `docs/v2/storage-catalog.md`, `docs/v2/testing.md`, `crates/storage/src/object_store_provider.rs`, `crates/client/src/runtime.rs`, `crates/distributed/src/worker.rs` | `object_store_uri_detection_requires_scheme`, `object_store_scan_reads_file_uri_parquet`, `object_store_scan_retries_then_fails_for_missing_object` | Retry/backoff/timeout/range reads are documented and tested; multi-cloud production hardening remains partial. |
| `EPIC 9 — RAG / Hybrid Search v2 (True Hybrid Engine)` | partial | `docs/v2/vector-rag.md`, `docs/v2/testing.md`, `docs/v2/api-contract.md`, `crates/planner/src/optimizer.rs`, `crates/planner/src/physical_planner.rs`, `crates/client/src/engine.rs`, `crates/client/src/embedding.rs` | `crates/client/tests/embedded_two_phase_retrieval.rs`, `crates/client/tests/qdrant_routing.rs`, `crates/client/tests/public_api_contract.rs`, `crates/planner/tests/optimizer_golden.rs` | Hybrid/vector APIs and routing are implemented in part; full “true hybrid engine” scope and broader provider capabilities remain partial. |
| `9.1 Hybrid plan node + score column` | partial | `docs/v2/vector-rag.md`, `crates/planner/src/logical_plan.rs`, `crates/planner/src/physical_planner.rs`, `crates/planner/src/explain.rs`, `crates/client/src/engine.rs` | `crates/client/tests/embedded_two_phase_retrieval.rs`, `crates/client/tests/qdrant_routing.rs`, `crates/planner/tests/optimizer_golden.rs` | `HybridVectorScan` and `VectorKnnExec` exist with score output contracts; broader SQL-native hybrid node coverage is still evolving. |
| `9.2 Prefilter pushdown (connector-aware)` | partial | `docs/v2/vector-rag.md`, `crates/planner/src/optimizer.rs`, `crates/planner/src/physical_plan.rs`, `crates/client/src/runtime.rs` | `crates/client/tests/qdrant_routing.rs`, `crates/planner/tests/optimizer_golden.rs` | Qdrant filter subset pushdown + fallback exists; provider capability negotiation is subset-specific rather than a generalized capability framework. |
| 9.3 `VectorKnnExec` knobs | partial | `docs/v2/vector-rag.md`, `crates/planner/src/physical_plan.rs`, `crates/client/src/dataframe.rs`, `crates/storage/src/qdrant_provider.rs` | `crates/client/src/dataframe.rs`, `crates/planner/src/optimizer.rs` | `metric` and `ef_search` knobs are implemented and validated; broader runtime tuning/recall characterization is limited. |
| `9.4 Batched query mode` | partial | `docs/v2/vector-rag.md`, `docs/v2/api-contract.md`, `crates/client/src/engine.rs`, `crates/planner/src/explain.rs` | `crates/client/tests/public_api_contract.rs` | `Engine::hybrid_search_batch` exists and builds `HybridVectorScan`; throughput benchmarking and richer result-shape docs are limited. |
| `9.5 Stable embedding API (provider/plugin)` | partial | `docs/v2/vector-rag.md`, `docs/v2/api-contract.md`, `crates/client/src/embedding.rs`, `crates/client/src/engine.rs`, `crates/client/src/lib.rs` | `crates/client/tests/public_api_contract.rs`, `crates/client/src/embedding.rs` | `EmbeddingProvider` + sample/http providers exist; caching and broader provider ecosystem are not implemented. |
| `EPIC 10 — Observability & Developer UX v2` | not started | Gap | Gap | v1 observability exists; v2 UX scope not started. |
| `10.1 Dashboard endpoint / Web UI MVP` | not started | Gap | Gap | No dashboard endpoint evidence. |
| `10.2 Explain: logical/physical/adaptive` | not started | Gap | Gap | No adaptive explain evidence. |
| `10.3 Profiling artifacts` | not started | Gap | Gap | No per-query profile artifact flow evidence. |
| `EPIC 11 — Release Pipeline (Deferred)` | partial | `.github/workflows/python-wheels.yml`, `docs/dev/python-bindings.md` | wheel smoke in workflow | Deferred epic; only wheel workflow pieces exist. |
| `11.1 Release Contract + Versioning Policy` | not started | Gap | Gap | No `docs/release/README.md` contract page yet. |
| `11.2 Server Binary Packaging Workflow` | not started | Gap | Gap | No dedicated release-binaries workflow yet. |
| `11.3 Crate Publish Pipeline` | not started | Gap | Gap | No publish orchestration script/workflow yet. |
| `11.4 Python Binding Crate Scaffold` | partial | `docs/v2/ffi-python.md`, `crates/client/src/python.rs`, `pyproject.toml` | `.github/workflows/python-wheels.yml` | Uses current crate integration; dedicated `crates/python` scaffold not present. |
| `11.5 Python Wheels CI Build` | done | `.github/workflows/python-wheels.yml`, `docs/dev/python-bindings.md` | workflow smoke install/run | - |
| `11.6 Unified Release Orchestration` | not started | Gap | Gap | No unified `release.yml` orchestration evidence. |
| `11.7 GitHub Release Publishing` | not started | Gap | Gap | No GH release asset pipeline evidence. |
| `11.8 PyPI Publish (Optional Toggle)` | not started | Gap | Gap | No PyPI publish lane evidence. |
| `11.9 Release Verification + Smoke Tests` | partial | `docs/v2/testing.md`, `.github/workflows/python-wheels.yml` | wheel smoke | Full cross-artifact smoke suite not implemented. |
| `11.10 Operator Runbook + Troubleshooting` | not started | Gap | Gap | No release runbook docs yet. |
| `Implementation as vertical slices (v2 order)` | partial | `docs/v2/status-matrix.md`, `docs/v2/testing.md`, `crates/client/src/ffi.rs`, `crates/client/src/python.rs`, `crates/execution/src/physical_registry.rs`, `crates/distributed/src/coordinator.rs` | `crates/client/tests/udf_api.rs`, `crates/client/tests/physical_registry.rs` | Slice 1 mostly done; slices 2-9 largely not started. |

## Notes

1. This matrix is tied to current repository state and should be updated as each v2 ticket lands.
2. Headings are mapped from `tickets/eng/Plan_v2.md` and appear once each in the table above.

## DOCV2-17 Audit Record

Structured audit executed for v2 standalone guarantee:

1. required v2 page existence check: `python3 scripts/validate-docs-v2.py` -> pass
2. markdown link/anchor integrity check (v2 docs + root entry docs): pass
3. Plan_v2 heading coverage lint vs this matrix: pass
4. root/contributor entrypoint policy update (`Readme.md`, `Contributing.md`): complete
5. learner-track synchronization for v2 runtime/control-plane/extensibility: complete

### Closures (this audit)

1. v2 docs guardrail CI added: `.github/workflows/docs-v2-guardrails.yml`
2. local guardrail command added: `make docs-v2-guardrails`
3. migration, quickstart, testing, API, runtime, bindings, extensibility, deployment docs now exist in `docs/v2/*`
4. contributor policy explicitly requires v2 doc updates on behavior/API/config/runtime changes

### Unresolved gaps (tracked)

1. `docs/v2/distributed-capabilities.md` is still placeholder (`TBD` sections) and should be completed.
2. Many `docs/v2/*` metadata headers still have `Last Verified Commit/Date: TBD`; process-level follow-up is needed to keep verification metadata current.
3. Plan_v2 epics not implemented in code (for example EPIC 3+, most of EPIC 4-11) remain intentionally documented as `not started`/`partial`.

### Sign-off

Sign-off for implemented scope:

1. v2 documentation is self-sufficient for currently implemented v2 scope (EPIC 1/2 plus completed docs tracks), without requiring `docs/v1/*` for execution or contributor workflow.
2. unresolved items above are explicitly tracked and do not block standalone use of implemented scope.
